<main class="main">
  <div class="content">
    <form (ngSubmit)="addWorkout()">
      <label for="name">Name:</label>
      <input type="text" id="name" [(ngModel)]="name" name="name" placeholder="Enter Name here" required />

      <label for="workoutType">Workout Type:</label>
      <select id="workoutType" [(ngModel)]="workoutType" name="workoutType" required>
        <option hidden value="">Workout Type</option>
        <option *ngFor="let type of workoutTypes" [value]="type">{{ type }}</option>
      </select>

      <label for="workoutMinutes">Workout Minutes:</label>
      <input type="number" id="workoutMinutes" name="workoutMinutes" [(ngModel)]="workoutMinutes" placeholder="Enter in mins" required />

      <input type="submit" value="Add" />
      <button (click)="resetLocalStorage()">Reset Storage</button>
    </form>
  </div>

  <label for="name">Search by Name:</label>
  <input type="text" id="name" [(ngModel)]="nameFilter" (input)="filterUsers()" placeholder="Enter Name here" />

  <label for="workoutType">Filter by Workout Type:</label>
  <select id="workoutType" [(ngModel)]="workoutType" (change)="filterUsers()">
    <option value="">All Types</option>
    <option *ngFor="let type of workoutTypes" [value]="type">{{ type }}</option>
  </select>

  <button (click)="clearFilters()">Clear Filters</button>

  <h2>Workout Table</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Workout Type</th>
        <th>Workout Minutes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of paginatedUsers">
        <td>{{ user.name }}</td>
        <td>
          <ng-container *ngFor="let workout of user.workouts; let last = last">
            {{ workout.type }}{{ last ? '' : ', ' }}
          </ng-container>
          <td>{{ getTotalUserWorkoutMinutes(user) }}</td>
      </tr>
    </tbody>
  </table>
  <div>
    <button (click)="previousPage()">Previous</button>
    <span>Page {{ currentPage }}</span>
    <button (click)="nextPage()">Next</button>
  </div>
</main>
